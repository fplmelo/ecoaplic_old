<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.108.0">
<title>Análise de Clusters | Applied Ecology</title>


<meta property="twitter:site" content="@apreshill">
<meta property="twitter:creator" content="@apreshill">







  
    
  
<meta name="description" content="A modern, beautiful, and easily configurable blog theme for Hugo.">


<meta property="og:site_name" content="Applied Ecology">
<meta property="og:title" content="Análise de Clusters | Applied Ecology">
<meta property="og:description" content="A modern, beautiful, and easily configurable blog theme for Hugo." />
<meta property="og:type" content="page" />
<meta property="og:url" content="/courses/eco_num/cluster/cluster/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="/img/papillons.jpg" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="/img/papillons.jpg" >
    
  <meta itemprop="name" content="Análise de Clusters">
<meta itemprop="description" content="Análise de Clusters Slides
Segundo os autores do livro Numerical Ecology, a interpretação de um dendograma típíco das análises de cluster, demanda um certo grau de abstração, vejamos. Um cluster serve para particionar (i.e. criar fornteiras) conjuntos de objetos (Q mode) ou variáveis (R-mode). Dessa forma, podemos identificar o grau de semelhança (ou diferença) entre sujeitos analisados. Para isso, a análise cria uma tipologia, que é uma estrutura completa e complexa, na forma de uma árvore ou nuvem de pontos que informa sobre essa semelhança/diferença.">

<meta itemprop="wordCount" content="2087">
<meta itemprop="keywords" content="" />
  
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.508aa34bb4fa7ebfddd6892a4ec251e1ce46ad0e0c5be6380abc84336f01b14e.css" integrity="sha256-UIqjS7T6fr/d1okqTsJR4c5GrQ4MW&#43;Y4CryEM28BsU4=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.b98a7a2516e17eff5e237d2ab610df0b5b9fdfda6184f0231dd7a1c3841c19c2.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container single-series">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="/" title="Home">
      <img src="/img/blogophonic-mark-dark.png" class="dib db-l h2 w-auto" alt="Applied Ecology">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About Blogophonic">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/blog/" title="Blog">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/project/" title="Project Portfolio">Projects</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/talk/" title="Talks">Talks</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/courses/" title="Courses">Courses</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/elements/" title="Element Page">Elements</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Análise de Clusters</h1>
        
        
        

      

      </header>
      <section class="post-body pt5 pb4">
        <script src="/rmarkdown-libs/fitvids/fitvids.min.js"></script>




<h1 id="análise-de-clusters">Análise de Clusters
  <a href="#an%c3%a1lise-de-clusters"></a>
</h1>
<p><em>Slides</em></p>
<div class="shareagain" style="min-width:300px;margin:1em auto;" data-exeternal="1">
<iframe src="http://ecoaplic.org/en/courses/eco_num/slides_eco_num/slide_aula3_cluster.html#1" width="1600" height="900" style="border:2px solid currentColor;" loading="lazy" allowfullscreen></iframe>
<script>fitvids('.shareagain', {players: 'iframe'});</script>
</div>
<p><img src="https://i1.wp.com/complex-systems-ai.com/wp-content/uploads/2020/09/Cluster-Analysis-1000x468-1.jpg?resize=1000%2C468&amp;ssl=1" alt=""></p>
<p>Segundo os autores do livro <strong>Numerical Ecology</strong>, a interpretação de um dendograma típíco das análises de cluster, demanda um certo grau de abstração, vejamos. Um cluster serve para particionar (i.e. criar fornteiras) conjuntos de objetos (Q mode) ou variáveis (R-mode). Dessa forma, podemos identificar o grau de semelhança (ou diferença) entre sujeitos analisados. Para isso, a análise cria uma <strong>tipologia</strong>, que é uma estrutura completa e complexa, na forma de uma árvore ou nuvem de pontos que informa sobre essa semelhança/diferença. A 
<a href="https://en.wikipedia.org/wiki/Cluster_analysis#:~:text=Cluster%20analysis%20or%20clustering%20is,in%20other%20groups%20%28clusters%29" target="_blank" rel="noopener">Wikipedia</a> tem um verbete interssante sobre isso e vou deuxar aqui alguns tutoriais em <strong>R</strong> paa vocês reprodizirem.</p>




<h1 id="o-pulo-do-gato">O pulo do gato
  <a href="#o-pulo-do-gato"></a>
</h1>
<p><img src="https://media.giphy.com/media/kZ1prc4j4nV84/giphy.gif" alt=""></p>
<p>Se você juntar qualquer conjunto de dados, de qualquer natureza, uma análise de cluster vai gerar uma estrutura que vai parecer uma coisa que têm sentido ou até impressionar seus colegas que dirão: UAU!!!</p>
<p>O “<strong>pulo do gato</strong>” se refere ao uso da análise cluster associado a uma *HIPÓTESE”. Você precisa pensar sobre seus dados ecológicos, que geralmente são frutos de um desenho amostral guiado por uma pergunta científica. Prestem atenção no último exercício, da última aula, onde mostrei pra vocês como, à partir de uma pergunta sobre a semelhança entre as comunidades do alto, média e baixo rio, testei através de uma análise de cluster, se minha hipóitese tinha sentido. E tinha, de certa forma, mas comunidades dessas três seções do rio, são mais parecidas entre si que entre elas e outras comunidades de outras partes do rio. Mostrei isso colorindo minhas comunidades e organizando-as num cluster.</p>
<p><strong>Nota de precaução</strong>, e aqui vou citar literalmente o <em>Numerical Ecology with R</em>: “Clustering is not a typical statistical method in that it does not test any hypothesis. Clustering helps bring out some features hidden in the data; it is the user who decides if these structures are interesting and worth interpreting in ecological terms.” (p. 54)</p>
<p>Ou seja, o ordenamento via cluster não é um 
<a href="https://www.inf.ufsc.br/~andre.zibetti/probabilidade/teste-de-hipoteses.html" target="_blank" rel="noopener"><strong>teste de hipótese</strong></a> mas uma ferramenta para explorar estruturas “ocultas” nos dados, e somos nós pesquisadores, que decidimos se elas têm algum valor ecológico. Lembrem-se, qualquer dados de qalquer natureza, vai ser agrupado numa estrutura qualquer. Nós é que precisamos dar sentido à elas.</p>




<h1 id="exemplo-1">Exemplo 1
  <a href="#exemplo-1"></a>
</h1>
<p>Imagine-se na sua turma da escola, com 40 alunos. Um professor de biologia pediu quefosse formados 5 grupos para a realização de um trabalho sobre a vida na Terra. Os grupos são livres, cada um fica com as companhias e o tema que desejar. Cada grupo tem que fazer um trabalho sobre um dos reinos: animal, vegetal, fungi, protista e monera. A pergunta é: Como se agrupariam os alunos? Quais seriam so critérios que vocÊ imaginaria? Eu, se me lembro bem, pois faz tempo… pensaria:</p>
<ol>
<li>
<p>Vou fiar com meus amigos/amigas</p>
</li>
<li>
<p>Vou ficar com o tema que gosto mais</p>
</li>
<li>
<p>Não posso ficar só com a turma da bagunça</p>
</li>
<li>
<p>Quero ficar no grupo daquela “boyzinha/boyzinho”</p>
</li>
</ol>
<p>Então, é muito provável que um professor atento à sua turma consiga prever quase com perfeição, como será a composição dos grupos. Mas nunca 100%, tem sempre um erro associado que bagunça a estrutura esperada.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">set.seed</span>(<span style="color:#099">999</span>) <span style="color:#998;font-style:italic"># vai gerar sempre o mesmo resultado com as funções abaixo</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">tibble</span>(
</span></span><span style="display:flex;"><span>  aluno <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">paste0</span>(<span style="color:#d14">&#34;aluno&#34;</span>, <span style="color:#099">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">40</span>), <span style="color:#998;font-style:italic"># 40 alunos</span>
</span></span><span style="display:flex;"><span>  amizade <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">5</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>), <span style="color:#998;font-style:italic"># grupo de amigos ao qual pertence. aqui separei em 5 grupos</span>
</span></span><span style="display:flex;"><span>  tema <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">5</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>),<span style="color:#998;font-style:italic"># um dos cinco reinos, sendo 1=planta; 2=animal; 3=fungi;4=protista;5=monera</span>
</span></span><span style="display:flex;"><span>  bagunca <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">0</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">1</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>),<span style="color:#998;font-style:italic"># ou se é bagunceiro =1 ou não é bagunceiro = 0</span>
</span></span><span style="display:flex;"><span>  love <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">0</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">1</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>) <span style="color:#998;font-style:italic"># seu love tá lá = 1 ou não está =0</span>
</span></span><span style="display:flex;"><span>)<span style="color:#000;font-weight:bold">-&gt;</span> aula
</span></span><span style="display:flex;"><span>aula
</span></span></code></pre></div><pre><code>## # A tibble: 40 × 5
##    aluno   amizade  tema bagunca  love
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt;
##  1 aluno1        3     2       0     0
##  2 aluno2        4     5       0     0
##  3 aluno3        5     1       1     1
##  4 aluno4        1     2       1     1
##  5 aluno5        1     5       1     1
##  6 aluno6        2     4       1     0
##  7 aluno7        2     5       1     1
##  8 aluno8        3     4       1     0
##  9 aluno9        5     2       0     1
## 10 aluno10       3     3       0     0
## # … with 30 more rows
</code></pre>
<p>Vamos criar uma matriz de similaridade. Nesse caso, temos variaǘeis cujos zeros são importantes (lembram?) e portanto devemos usar alguma medida de distância que seja sensível a isso. Vamos testar com a distância euclidiana mesmo.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>al.dist<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">vegdist</span>(aula[,<span style="color:#099">-1</span>],method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;euclidean&#34;</span>) <span style="color:#998;font-style:italic"># retirei a coluna dos nomes dos alunos</span>
</span></span></code></pre></div><p>Agora é só graficar…</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>clust_alun.comp<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">hclust</span>(al.dist, method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;complete&#34;</span>)
</span></span><span style="display:flex;"><span>clust_graf_alun.com<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">plot</span>(clust_alun.comp, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>)
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-4-1.png" width="672" />
<p>Mas, diante dessa estrutura, qual é a informação que você extrai? Sem uma hipotese, não tem muito o que fazer a não ser observar a distribuição dos 40 alunos nos grupos e ficar pensando o que eles têm em comum e talvez, num segundo momento, pensar numa hipotese.</p>




<h1 id="alguns-princípios">Alguns princípios
  <a href="#alguns-princ%c3%adpios"></a>
</h1>




<h3 id="escolha-o-método-de-agrupamento">Escolha o método de agrupamento
  <a href="#escolha-o-m%c3%a9todo-de-agrupamento"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>No exemplo acima, é possível notar que usei o método “complete”, mas existem outos, que dão resultados diferentes. Vejamos:</p>
<p>Parece que ainda menos informçaõ foi gerada.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>clust_alun<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">hclust</span>(al.dist, method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;single&#34;</span>)
</span></span><span style="display:flex;"><span>clust_graf_alun<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">plot</span>(clust_alun, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>)
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-5-1.png" width="672" />
<p>E se testarmos outros metodos, como “<strong>Ward</strong>”?</p>
<p>Parecem consguir agrupar tão bem quanto o “complete”</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>clust_alun<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">hclust</span>(al.dist, method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;ward.D&#34;</span>)
</span></span><span style="display:flex;"><span>clust_graf_alun<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">plot</span>(clust_alun, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>)
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-6-1.png" width="672" />
<p>
<a href="http://www.each.usp.br/lauretto/cursoR2017/04-AnaliseCluster.pdf" target="_blank" rel="noopener">Aqui</a> Tem uma apresentção bem resumidinha sobre os métodos de agrupamento de cluster, feita por 
<a href="http://www5.each.usp.br/web/prof/lauretto/" target="_blank" rel="noopener">Marcelo Lauretto</a> da USP</p>




<h3 id="escolha-o-método-de-distância-a-ser-usado">Escolha o método de distância a ser usado
  <a href="#escolha-o-m%c3%a9todo-de-dist%c3%a2ncia-a-ser-usado"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Os métodos de distância são os mais usados para dados numéricos, mas <em>sofrem</em> quando os dados são categóricos, mesmo quando esses são representados por zeros e uns. Qual a distância entre ser “bagunceiro” e “não-bagunceiro” (exemplo acima)? Bom, aqui representamos como zeros e uns. Igualmente, usei números quue separam os temas e a distância entre monera e planta é maior que a distância entre planta e animal.</p>
<p>vejamos o que acontece que realmente considerarmos nossa matriz como dados categóricos, que é o que são na realidade.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>aula <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">mutate_at</span>(<span style="color:#900;font-weight:bold">vars</span>(<span style="color:#099">2</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">5</span>), factor)<span style="color:#000;font-weight:bold">-&gt;</span>aula.fct <span style="color:#998;font-style:italic"># isso tranforma todo mundo em fatores categóricos</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Ou podemos refazer a tabela propriamente</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">set.seed</span>(<span style="color:#099">999</span>) <span style="color:#998;font-style:italic"># vai gerar sempre o mesmo resultado com as funções abaixo</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">tibble</span>(
</span></span><span style="display:flex;"><span>  aluno <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">paste0</span>(<span style="color:#d14">&#34;aluno&#34;</span>, <span style="color:#099">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">40</span>), <span style="color:#998;font-style:italic"># 40 alunos</span>
</span></span><span style="display:flex;"><span>  amizade <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;a&#34;</span>,<span style="color:#d14">&#34;b&#34;</span>,<span style="color:#d14">&#34;c&#34;</span>,<span style="color:#d14">&#34;d&#34;</span>,<span style="color:#d14">&#34;e&#34;</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>), <span style="color:#998;font-style:italic"># grupo de amigos ao qual pertence. aqui separei em 5 grupos</span>
</span></span><span style="display:flex;"><span>  tema <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;planta&#34;</span>,<span style="color:#d14">&#34;animal&#34;</span>,<span style="color:#d14">&#34;fungo&#34;</span>,<span style="color:#d14">&#34;protista&#34;</span>,<span style="color:#d14">&#34;monera&#34;</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>),<span style="color:#998;font-style:italic"># com nomes</span>
</span></span><span style="display:flex;"><span>  bagunca <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;bagunça&#34;</span>, <span style="color:#d14">&#34;cdf&#34;</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>),<span style="color:#998;font-style:italic"># ou se é bagunceiro = bagunça ou não é bagunceiro = cdf</span>
</span></span><span style="display:flex;"><span>  love <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">sample</span>(<span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;love&#34;</span>,<span style="color:#d14">&#34;n_love&#34;</span>), replace<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">TRUE</span>, size<span style="color:#000;font-weight:bold">=</span><span style="color:#099">40</span>) <span style="color:#998;font-style:italic"># seu love tá lá = love ou não está =n_love</span>
</span></span><span style="display:flex;"><span>)<span style="color:#000;font-weight:bold">-&gt;</span> aula.fct
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">head</span>(aula.fct)
</span></span></code></pre></div><pre><code>## # A tibble: 6 × 5
##   aluno  amizade tema     bagunca love  
##   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; 
## 1 aluno1 c       animal   bagunça love  
## 2 aluno2 d       monera   bagunça love  
## 3 aluno3 e       planta   cdf     n_love
## 4 aluno4 a       animal   cdf     n_love
## 5 aluno5 a       monera   cdf     n_love
## 6 aluno6 b       protista cdf     love
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#al.dist.fct&lt;-vegdist(aula.fct[,-1], method = &#34;euclidian&#34;)# não aceita euclidiana. na verdade a função vegdist não aceita dados categóricos.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(cluster)
</span></span><span style="display:flex;"><span>al.dist.fct<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">daisy</span>(aula[,<span style="color:#099">-1</span>], metric <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">c</span>(<span style="color:#d14">&#34;gower&#34;</span>)) <span style="color:#998;font-style:italic"># Essa função com a distância &#34;gower&#34; consegue calcular a matriz de siilaridade</span>
</span></span></code></pre></div><pre><code>## Warning in daisy(aula[, -1], metric = c(&quot;gower&quot;)): binary variable(s) 3, 4
## treated as interval scaled
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>clust_alun_fct<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">hclust</span>(al.dist.fct, method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;complete&#34;</span>)
</span></span><span style="display:flex;"><span>clust_graf_alun_fact<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">plot</span>(clust_alun_fct, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>)
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-7-1.png" width="672" />
<p>Vamos compara os dois?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(cowplot)
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">plot_grid</span>(<span style="color:#900;font-weight:bold">plot</span>(clust_alun.comp, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>), <span style="color:#900;font-weight:bold">plot</span>(clust_alun_fct, hang<span style="color:#000;font-weight:bold">=</span><span style="color:#099">-1</span>))
</span></span></code></pre></div><p><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-8-1.png" width="672" /><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-8-2.png" width="672" /><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>




<h3 id="averigue-a-qualidade-do-cluster">Averigue a qualidade do cluster
  <a href="#averigue-a-qualidade-do-cluster"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>A maneira mais simples de avaliar a qualidade de um cluster é saber se a distância entre os pares <strong>dentro</strong> do grupo é menor que <strong>entre</strong> os grupos.</p>




<h1 id="tipos-de-métodos">Tipos de métodos
  <a href="#tipos-de-m%c3%a9todos"></a>
</h1>
<p><img src="https://miro.medium.com/max/516/1*qrfDH1woi77HSuzOq7ymmA.png" alt="">

<a href="http://uc-r.github.io/hc_clustering" target="_blank" rel="noopener">UC Business Analytics R Programming Guide</a></p>
<p>Essa figura mostra os dois grandes tipos de métodos: <strong>Aglomerativo</strong> e <strong>Divisivo</strong>. Eles se diferenciam basicamente na ordem em que começam a organizar os clusters, se da ponta à raíz, ou ao contrátrio. Uma descrição completa se encontra nos links que estão ao longo dessa aula.</p>




<h1 id="melhorando-os-dendogramas">Melhorando os dendogramas
  <a href="#melhorando-os-dendogramas"></a>
</h1>
<p>Nesses dendogramas que estamos gerando, o eixo Y “height” é usado para ler a dissimilaridade entre pares de objetos unidos por um mesmo “nó”, mas não podemos usar esse eixo para medir a distância entre objetos unidos por <strong>clusters</strong>. Para isso precisamos criar os grupos ou pedir que os algorítimos <em>encontrem</em> os grupos.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>grup_alun<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">cutree</span>(clust_alun_fct, k<span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>) <span style="color:#998;font-style:italic"># quero 5 grupos</span>
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">table</span>(grup_alun) <span style="color:#998;font-style:italic"># vejamos o número de alunos em cada grupo</span>
</span></span></code></pre></div><pre><code>## grup_alun
##  1  2  3  4  5 
## 11  6 10  5  8
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">plot</span>(clust_alun_fct)
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">rect.hclust</span>(clust_alun_fct, k <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">4</span>, border <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">5</span>) <span style="color:#998;font-style:italic"># posse até ver quais são esses grupos</span>
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-9-1.png" width="672" />
<p>Agora, podemos voltar para nossos dados e ver se os grupos gerados. E à partir daqui, uma infindade de análises exploratórias podem ser feitas.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>aula.fct <span style="color:#000;font-weight:bold">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#900;font-weight:bold">mutate</span>(cluster<span style="color:#000;font-weight:bold">=</span>grup_alun)
</span></span></code></pre></div><pre><code>## # A tibble: 40 × 6
##    aluno   amizade tema     bagunca love   cluster
##    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt;
##  1 aluno1  c       animal   bagunça love         1
##  2 aluno2  d       monera   bagunça love         1
##  3 aluno3  e       planta   cdf     n_love       2
##  4 aluno4  a       animal   cdf     n_love       2
##  5 aluno5  a       monera   cdf     n_love       3
##  6 aluno6  b       protista cdf     love         4
##  7 aluno7  b       monera   cdf     n_love       3
##  8 aluno8  c       protista cdf     love         4
##  9 aluno9  e       animal   bagunça n_love       5
## 10 aluno10 c       fungo    bagunça love         1
## # … with 30 more rows
</code></pre>




<h1 id="método-não-hierárquico-k-means">Método não hierárquico (K-means)
  <a href="#m%c3%a9todo-n%c3%a3o-hier%c3%a1rquico-k-means"></a>
</h1>
<p>Aqui o problema é quando não sabemos se a esturura dos dados permite ou não reconhecer grupos. Isso é muito comum para dados biológicos, mas pode ser aplicado por exemplo para saber se podemos dividir nosso rio (aquele do exemplo do livro, em três partes: alto, médio e baixo) de maneira embasada nos intervalos dos dados. A lógica do agrupamento não hierárquico é que ele tenta <strong>sempre</strong> minimizar a distância intra-grupo dentro de um conjunto pré-definido de grupos a serem criados.</p>
<p>Vejamos como funcionaria para o nosso rio</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>k3<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">kmeans</span>(env[,<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span>,<span style="color:#099">4</span>,<span style="color:#099">12</span>)], centers <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">3</span>, nstart<span style="color:#000;font-weight:bold">=</span><span style="color:#099">25</span>)
</span></span><span style="display:flex;"><span>k3 <span style="color:#998;font-style:italic"># Aqui dá pra ver muita coisa, inclusive a qual cluster (1,2 uo 3) cada amostra do rio pertence. Dá pra ver a média de cada variável entre os clusters </span>
</span></span></code></pre></div><pre><code>## K-means clustering with 3 clusters of sizes 9, 14, 7
## 
## Cluster means:
##        ele      slo       pH      har       pho      nit         amm       oxy
## 1 857.1111 8.188889 8.044444 69.44444 0.1477778 0.320000 0.065555556  9.722222
## 2 248.7143 0.700000 8.028571 94.57143 1.0050000 2.795714 0.402142857  8.128571
## 3 464.4286 3.057143 8.100000 90.57143 0.1900000 1.085714 0.008571429 11.485714
##        bod
## 1 4.044444
## 2 6.864286
## 3 3.000000
## 
## Clustering vector:
##  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 
##  1  1  1  1  1  1  1  1  1  3  3  3  3  3  3  3  2  2  2  2  2  2  2  2  2  2 
## 27 28 29 30 
##  2  2  2  2 
## 
## Within cluster sum of squares by cluster:
## [1] 35819.23 40309.58 35691.36
##  (between_SS / total_SS =  94.8 %)
## 
## Available components:
## 
## [1] &quot;cluster&quot;      &quot;centers&quot;      &quot;totss&quot;        &quot;withinss&quot;     &quot;tot.withinss&quot;
## [6] &quot;betweenss&quot;    &quot;size&quot;         &quot;iter&quot;         &quot;ifault&quot;
</code></pre>
<p>Agora podemos graficar</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">library</span>(factoextra)
</span></span></code></pre></div><pre><code>## Welcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa
</code></pre>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">fviz_cluster</span>(k3, data <span style="color:#000;font-weight:bold">=</span> env[,<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span>,<span style="color:#099">4</span>,<span style="color:#099">12</span>)])
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-12-1.png" width="672" />
<p>Será que <strong>3</strong> é ralmente o melhor número de clusters para separar as seções do rio?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#900;font-weight:bold">fviz_nbclust</span>(env[,<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span>,<span style="color:#099">4</span>,<span style="color:#099">12</span>)], kmeans, method <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;silhouette&#34;</span>) <span style="color:#998;font-style:italic"># felizmente tem uma função que faz isso rapidinho</span>
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-13-1.png" width="672" />
<p>Epa!!!! aparentemente são apenas duas as seções do rio que fazem sentido segundo os dados, portantom recomecemos de novo.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>k2<span style="color:#000;font-weight:bold">&lt;-</span><span style="color:#900;font-weight:bold">kmeans</span>(env[,<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span>,<span style="color:#099">4</span>,<span style="color:#099">12</span>)], centers <span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>, nstart<span style="color:#000;font-weight:bold">=</span><span style="color:#099">25</span>)
</span></span><span style="display:flex;"><span><span style="color:#900;font-weight:bold">fviz_cluster</span>(k2, data <span style="color:#000;font-weight:bold">=</span> env[,<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">c</span>(<span style="color:#099">1</span>,<span style="color:#099">4</span>,<span style="color:#099">12</span>)])
</span></span></code></pre></div><img src="/en/courses/eco_num/cluster/cluster_files/figure-html/unnamed-chunk-14-1.png" width="672" />
<p>Então, parece que temos apenas um “alto” e um “baixo” rio.</p>




<h1 id="resumo">Resumo
  <a href="#resumo"></a>
</h1>
<p>Vocês verão, se usarem o 
<a href="https://fplmelo.github.io/eco_numerica/data/NEwR-2ed_code_data/NEwR2-Scripts/chap4.R" target="_blank" rel="noopener">script dp capítulo 4</a> do <strong>Numerical Ecology with R</strong> verao que há uma infinidade de aplicações para agrupamentos de cluster. Na verdade são tantas que ficaria chato aqui mostrar uma por uma. Mas, o que precisam saber é:</p>
<ol>
<li>
<p>Clusters são métodos de agrupamento que ajudam a revelar estrutura de dados</p>
</li>
<li>
<p>Dependem muito das escolhas do pesquisador e de sua interpretação. Não são um teste estatístico.</p>
</li>
<li>
<p>Podem e devem ser usados para a análise de dados ecológicos que envolvem muitas variáveis.</p>
</li>
</ol>




<h1 id="exercício-para-entrega">Exercício para entrega
  <a href="#exerc%c3%adcio-para-entrega"></a>
</h1>
<p><img src="https://media.giphy.com/media/xUOxfd3Y6g2C2aSXkc/giphy.gif" alt=""></p>
<ol>
<li>
<p>Use a base “spe” e tente econtrar grupos de amostras (comunidades) que pertencem à trechos específicos do rio <br></p>
</li>
<li>
<p>teste tanto medidas de distância quanto métodos de agrupamento diferentes</p>
</li>
<li>
<p>Use métodos de K-means para encontrar quantos clusters há de fato segundo o método “silhouette”</p>
</li>
<li>
<p>grafique o rio colorindo as amostras segundo seu pertencimento aos clusters gerados</p>
</li>
</ol>
<p>como esse aqui
<img src="https://fplmelo.github.io/eco_numerica/images/doubs_river.png" alt=""></p>
<ol start="5">
<li>Avalie com gráficos de boxplot como os clusters são diferenciados em termos ambientais (base “env”) e comente os resltados brevemente, tentando interpretar os resultados biológicos.</li>
</ol>
<p>#FIM</p>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">January 1, 0001</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">10 minute read, 2087 words</dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="/courses/eco_num/associacao/med_assoc/">&larr; Medidas de Associação</a>
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="/courses/eco_num/base_dados/base_dados/">Bases de dados Ecológicos &rarr;</a>
  
</div>

      </footer>
    </article>
    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2022 RStudio, Anywhere
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/fplmelo" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://twitter.com/FelipePLMelo" title="twitter" target="_blank" rel="me noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://scholar.google.com.br/citations?user=ytoqEukAAAAJ&amp;hl=pt-BR" title="google-scholar" target="_blank" rel="me noopener">
      <i class="ai ai-google-scholar fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://orcid.org/0000-0002-1271-3214" title="orcid" target="_blank" rel="me noopener">
      <i class="ai ai-orcid fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://publons.com/researcher/1509340/felipe-pl-melo/" title="publons" target="_blank" rel="me noopener">
      <i class="ai ai-publons fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.scopus.com/authid/detail.uri?authorId=7005124694" title="elsevier" target="_blank" rel="me noopener">
      <i class="ai ai-elsevier fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="http://lattes.cnpq.br/1637874338382368" title="lattes" target="_blank" rel="me noopener">
      <i class="ai ai-lattes fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/license/" title="License">License</a>
      
      <a class="dib pv1 ph2 link" href="/contact/" title="Contact form">Contact</a>
      
      <a class="dib pv1 ph2 link" href="/contributors/" title="Contributors">Contributors</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
